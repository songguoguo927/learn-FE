
/*浏览器架构

    用户界面
    主进程
    内核
        渲染引擎
        JS 引擎
            执行栈
        事件触发线程
            消息队列
                微任务
                宏任务
        网络异步线程
        定时器线程
*/
/*浏览器下事件循环(Event Loop)
事件循环是指: 执行一个宏任务，然后执行清空微任务列表，循环再执行宏任务，再清微任务列表

微任务 microtask(jobs): promise / ajax / ~~Object.observe~~(该方法已废弃)
宏任务 macrotask(task): setTimout / setInterval / script / IO / UI Rendering*/

## 任务队列
首先我们需要明白以下几件事情：
- JS分为同步任务和异步任务
- 同步任务都在主线程上执行，形成一个执行栈
- 主线程之外，事件触发线程管理着一个任务队列，只要异步任务有了运行结果，就在任务队列之中放置一个事件。
- 一旦执行栈中的所有同步任务执行完毕（此时JS引擎空闲），系统就会读取任务队列，将可运行的异步任务添加到可执行栈中，开始执行。